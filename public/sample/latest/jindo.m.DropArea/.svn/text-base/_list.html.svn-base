{+include("header.html")+}

<style>
/* 개별 Sample 관련 CSS */
li {
		list-style:none;
		margin-bottom:10px;
		padding:10px;
		width:200px;
		height:20px;
		background-color:#ccc;
	}
#parent {
		width:100%;
		height: 300px;
		margin-top:10px;		
	}
ul{
	padding-left: 10px;
}
.moving{
	background-color:#646464;
	-webkit-transform: skewX(-30deg);
	opacity: 0.6
}

.over{
	margin-top: 40px;
}
</style>

<!-- Content -->
<div id="ct" class="content">
    <h2 class="h_lft">{=COMPONENT}</h2>
    
    <!-- ViewSource -->
    <div id="view_source" class="view_source">
    	<div class="_view_status vs"><a href="#">view source</a><span class="ic_vc"></span></div>
	    <div class="sc">
	        <div class="_view_code sc_info" style="display:none;">
	       		<div>
					<h2 class="h2_code">CSS</h2>
					<!-- 마크업 구조 -->
					<textarea class="brush: css;">{=CSS}</textarea>	
				</div>
				<div>
					<h2 class="h2_code">HTML</h2>
					<textarea class="brush: xml;">{=HTML}</textarea>
				</div>
				<div>
					<h2 class="h2_code">SCRIPT</h2>
					<textarea class="brush: javascript;">{=SCRIPT}</textarea>
				</div>
	        </div>
	    </div>
    </div>
	<!--// ViewSource -->

	<!-- Demo 영역 -->
	<div id="demo"  >
		<div id="parent">
			<ul class="dropable">
	
				<li class="drag-dragging drop-area">1</li>
				<li class="drag-dragging drop-area">2</li>
				<li class="drag-dragging drop-area">3</li>
				<li class="drag-dragging drop-area">4</li>
				<li class="drag-dragging drop-area">5</li>
				<!-- 안보이는 엘리먼트 맨 마지막에 drop 할수도 있기 때문에 만들어 둠 -->
				<li class="drop-area" style="visibility:hidden;">Last</li>
			</ul>
		</div>

	</div>
	<!--// Demo 영역 -->
		

	<!-- Log 영역 -->
    <div class="scroll">
        <button type="button" id="delConsole" class="btn_del">로그모두삭제</button>
        <textarea title="로그" id="txtConsole" class="tarea"></textarea>
    </div>
    <!-- Log 영역 -->
</div>
<!--// Content -->

<!-- ViewSource Template 영역 -->
<div style="display:none;">
	<textarea>
	/*includeCSS*/	
	.moving{
		background-color:#646464;
		-webkit-transform: skewX(-30deg);
		opacity: 0.6
	}
	.over{
		margin-top: 40px;
	}
	/*includeCSSEnd*/	
	
	
	<!--includeHtml -->
	<div id="parent">
			<ul class="dropable">
	
				<li class="drag-dragging drop-area">1</li>
				<li class="drag-dragging drop-area">2</li>
				<li class="drag-dragging drop-area">3</li>
				<li class="drag-dragging drop-area">4</li>
				<li class="drag-dragging drop-area">5</li>
				<!-- 안보이는 엘리먼트 맨 마지막에 drop 할수도 있기 때문에 만들어 둠 -->
				<li class="drop-area" style="visibility:hidden;">Last</li>
			</ul>
		</div>

	<!--includeHtmlEnd -->
	
	
	/*includeScript*/
	var oDrag = new jindo.m.DragArea(jindo.$('parent'),{
		bFlowOut : true
	});
	
	var oDrop = new jindo.m.DropArea(jindo.$('parent'),{
		oDragInstance : oDrag
	});
	
	var aWelDrop = [];
	var nX = 0;
	var elLastDrop = null;
	var welLastOver = null;
	
	oDrop.attach({
		'handleDown': function(oCustomEvent){
			wel =jindo.$Element(oCustomEvent.elDrag);
			wel.removeClass('drop-area');
		},
		'dragStart' : function(oCustomEvent){
			wel =jindo.$Element(oCustomEvent.elDrag);
			wel.removeClass('drop-area');
			wel.addClass('moving');
			
			nX = oCustomEvent.nX;
			welLastOver = wel.next();			
		},
		'beforeDrag' : function(oCustomEvent){
			oCustomEvent.nX = nX;			
		},
		'over' : function(oCustomEvent){
			var wel = jindo.$Element(oCustomEvent.elDrop);
			if(welLastOver){
				welLastOver.removeClass('over');
			}
			if (!wel.hasClass('over')) {
				wel.addClass('over');
			}
			
		},
		'drag' : function(oCustomEvent){
			if(oCustomEvent.nDragCount === 0){
				this._reCalculate();	
				if(welLastOver && !welLastOver.hasClass('over')){
					welLastOver.addClass('over')
				}			
			}
		},	
		'out' : function(oCustomEvent){
			var wel = jindo.$Element(oCustomEvent.elDrop);
			wel.removeClass('over');
		
		},
		'drop' : function(oCustomEvent){
			var wel = jindo.$Element(oCustomEvent.elDrop);
			var welDrag = jindo.$Element(oCustomEvent.elDrag);
					
			wel.before(jindo.$Element(oCustomEvent.elDrag));
			welDrag.css({
				'position' : '',
				'top' : '',
				'left' : ''
			});
			wel.removeClass('over');
			
			if(!oCustomEvent.elDrop){
				alert('이메세지를 보시면 연락좀 주세요! by oyang2');
			}
			elLastDrop = wel.$value();
			nX  = 0;			
		},
			
		'dragEnd' : function(oCustomEvent){
			jindo.$Element(oCustomEvent.elDrag).removeClass('moving');
		},
		
		'handleUp' : function(oCustomEvent){
			var welDrag = jindo.$Element(oCustomEvent.elDrag);
			if (!welDrag.hasClass('drop-area')) {
				welDrag.addClass('drop-area');
			}
			
			if(!elLastDrop){
				welDrag.css({
				'position' : '',
				'top' : '',
				'left' : '',
				'zIndex' : ''
				});			
			}
			if(welLastOver){
				welLastOver.removeClass('over');
				welLastOver = null;
			}
			elLastDrop = null;		
		}
	});
	/*includeScriptEnd*/
	</textarea>
</div>
<!--// ViewSource Template 영역끝 -->

<!-- 사용자 script 파일 시작 -->
<script src="../../../source/jindo.m.Touch.js" charset="utf-8"></script>
<script src="../../../source/jindo.m.DragArea.js" charset="utf-8"></script>
<script src="../../../source/jindo.m.DropArea.js" charset="utf-8"></script>
<!-- 사용자 script 파일 끝 -->

<!-- Sample 실행 script 코드 -->
<script type="text/javascript">
var oDrag = new jindo.m.DragArea(jindo.$('parent'),{
	bFlowOut : true
});

var oDrop = new jindo.m.DropArea(jindo.$('parent'),{
	oDragInstance : oDrag
});

var aWelDrop = [];
var nX = 0;
var elLastDrop = null;
var welLastOver = null;

oDrop.attach({
	'handleDown': function(oCustomEvent){
		wel =jindo.$Element(oCustomEvent.elDrag);
		wel.removeClass('drop-area');
		//console.log('handle-> '+wel.className());
	},
	'dragStart' : function(oCustomEvent){
		wel =jindo.$Element(oCustomEvent.elDrag);
		wel.removeClass('drop-area');
		wel.addClass('moving');
		
		nX = oCustomEvent.nX;
		welLastOver = wel.next();		
		
		var sElText = jindo.$S(wel.text()).trim().toString() || "Last";
		var sText = sElText +" 드래그 시작";
		addConsole(sText);
	},
	'beforeDrag' : function(oCustomEvent){
		oCustomEvent.nX = nX;
		
	},
	'over' : function(oCustomEvent){
		var wel = jindo.$Element(oCustomEvent.elDrop);
		if(welLastOver){
			welLastOver.removeClass('over');
		}
		if (!wel.hasClass('over')) {
			wel.addClass('over');
		}
		var sElText = jindo.$S(wel.text()).trim().toString() || "Last";
		if(sElText.toString().length == 0){
			sElText = "Last";
		}
		console.log('//over ' +sElText + ", "+ sElText.length);
		
		var sText = "[OVER] "+ sElText +"번";
		addConsole(sText);
	},
	'drag' : function(oCustomEvent){
		if(oCustomEvent.nDragCount === 0){
			this._reCalculate();	
			if(welLastOver && !welLastOver.hasClass('over')){
				welLastOver.addClass('over')
			}			
		}
	},	
	'out' : function(oCustomEvent){
		var wel = jindo.$Element(oCustomEvent.elDrop);
		wel.removeClass('over');
	
	},
	'drop' : function(oCustomEvent){
		var wel = jindo.$Element(oCustomEvent.elDrop);
		var welDrag = jindo.$Element(oCustomEvent.elDrag);
				
		wel.before(jindo.$Element(oCustomEvent.elDrag));
		welDrag.css({
			'position' : '',
			'top' : '',
			'left' : ''
		});
		wel.removeClass('over');
		
		if(!oCustomEvent.elDrop){
			alert('이메세지를 보시면 연락좀 주세요! by oyang2');
		}
		elLastDrop = wel.$value();
		nX  = 0;
		
		var sElText = jindo.$S(wel.text()).trim().toString() || "Last";
		
		var sText = jindo.$S(welDrag.text()).trim()+"번  → "+ sElText +"번 위로 위치 이동";
		addConsole(sText);
	},
		
	'dragEnd' : function(oCustomEvent){
		jindo.$Element(oCustomEvent.elDrag).removeClass('moving');
	},
	
	'handleUp' : function(oCustomEvent){
		var welDrag = jindo.$Element(oCustomEvent.elDrag);
		if (!welDrag.hasClass('drop-area')) {
			welDrag.addClass('drop-area');
		}
		
		if(!elLastDrop){
			welDrag.css({
			'position' : '',
			'top' : '',
			'left' : '',
			'zIndex' : ''
			});
			
			var sElText = jindo.$S(wel.text()).trim().toString() || "Last";
			
			var sText =sElText +"번 제자리로 이동";
			addConsole(sText);
		}
		if(welLastOver){
			welLastOver.removeClass('over');
			welLastOver = null;
		}
		elLastDrop = null;		
	}
});


</script>
<!--// Sample 실행 script 코드 끝-->

{+include("footer.html")+}